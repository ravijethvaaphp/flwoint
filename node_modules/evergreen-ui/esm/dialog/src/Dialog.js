import _extends from "@babel/runtime/helpers/esm/extends";
import _classCallCheck from "@babel/runtime/helpers/esm/classCallCheck";
import _createClass from "@babel/runtime/helpers/esm/createClass";
import _possibleConstructorReturn from "@babel/runtime/helpers/esm/possibleConstructorReturn";
import _getPrototypeOf from "@babel/runtime/helpers/esm/getPrototypeOf";
import _assertThisInitialized from "@babel/runtime/helpers/esm/assertThisInitialized";
import _inherits from "@babel/runtime/helpers/esm/inherits";
import _defineProperty from "@babel/runtime/helpers/esm/defineProperty";

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

import { css } from 'glamor';
import React from 'react';
import PropTypes from 'prop-types';
import { Pane } from '../../layers';
import { Paragraph, Heading } from '../../typography';
import { Overlay } from '../../overlay';
import { Button, IconButton } from '../../buttons';
import { withTheme } from '../../theme';
import { CrossIcon } from '../../icons';
var animationEasing = {
  deceleration: "cubic-bezier(0.0, 0.0, 0.2, 1)",
  acceleration: "cubic-bezier(0.4, 0.0, 1, 1)"
};
var ANIMATION_DURATION = 200;
var openAnimation = css.keyframes('openAnimation', {
  from: {
    transform: 'scale(0.8)',
    opacity: 0
  },
  to: {
    transform: 'scale(1)',
    opacity: 1
  }
});
var closeAnimation = css.keyframes('closeAnimation', {
  from: {
    transform: 'scale(1)',
    opacity: 1
  },
  to: {
    transform: 'scale(0.8)',
    opacity: 0
  }
});
var animationStyles = {
  '&[data-state="entering"], &[data-state="entered"]': {
    animation: "".concat(openAnimation, " ").concat(ANIMATION_DURATION, "ms ").concat(animationEasing.deceleration, " both")
  },
  '&[data-state="exiting"]': {
    animation: "".concat(closeAnimation, " ").concat(ANIMATION_DURATION, "ms ").concat(animationEasing.acceleration, " both")
  }
};

var Dialog =
/*#__PURE__*/
function (_React$Component) {
  _inherits(Dialog, _React$Component);

  function Dialog() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, Dialog);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Dialog)).call.apply(_getPrototypeOf2, [this].concat(args)));

    _defineProperty(_assertThisInitialized(_this), "renderNode", function (node, close) {
      if (typeof node === 'function') {
        return node({
          close: close
        });
      }

      return node;
    });

    _defineProperty(_assertThisInitialized(_this), "renderChildren", function (close) {
      var children = _this.props.children;

      if (typeof children === 'function') {
        return children({
          close: close
        });
      }

      if (typeof children === 'string') {
        return React.createElement(Paragraph, null, children);
      }

      return children;
    });

    return _this;
  }

  _createClass(Dialog, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props = this.props,
          title = _this$props.title,
          width = _this$props.width,
          intent = _this$props.intent,
          isShown = _this$props.isShown,
          topOffset = _this$props.topOffset,
          sideOffset = _this$props.sideOffset,
          hasHeader = _this$props.hasHeader,
          header = _this$props.header,
          hasClose = _this$props.hasClose,
          hasFooter = _this$props.hasFooter,
          footer = _this$props.footer,
          hasCancel = _this$props.hasCancel,
          onCloseComplete = _this$props.onCloseComplete,
          onOpenComplete = _this$props.onOpenComplete,
          onCancel = _this$props.onCancel,
          onConfirm = _this$props.onConfirm,
          confirmLabel = _this$props.confirmLabel,
          isConfirmLoading = _this$props.isConfirmLoading,
          isConfirmDisabled = _this$props.isConfirmDisabled,
          cancelLabel = _this$props.cancelLabel,
          shouldCloseOnOverlayClick = _this$props.shouldCloseOnOverlayClick,
          shouldCloseOnEscapePress = _this$props.shouldCloseOnEscapePress,
          _this$props$container = _this$props.containerProps,
          containerProps = _this$props$container === void 0 ? {} : _this$props$container,
          contentContainerProps = _this$props.contentContainerProps,
          minHeightContent = _this$props.minHeightContent,
          preventBodyScrolling = _this$props.preventBodyScrolling,
          overlayProps = _this$props.overlayProps;
      var sideOffsetWithUnit = Number.isInteger(sideOffset) ? "".concat(sideOffset, "px") : sideOffset;
      var maxWidth = "calc(100% - ".concat(sideOffsetWithUnit, " * 2)");
      var topOffsetWithUnit = Number.isInteger(topOffset) ? "".concat(topOffset, "px") : topOffset;
      var maxHeight = "calc(100% - ".concat(topOffsetWithUnit, " * 2)");

      var renderHeader = function renderHeader(close) {
        if (!header && !hasHeader) {
          return undefined;
        }

        return React.createElement(Pane, {
          padding: 16,
          flexShrink: 0,
          borderBottom: "muted",
          display: "flex",
          alignItems: "center"
        }, header ? _this2.renderNode(header, close) : React.createElement(React.Fragment, null, React.createElement(Heading, {
          is: "h4",
          size: 600,
          flex: "1"
        }, title), hasClose && React.createElement(IconButton, {
          appearance: "minimal",
          icon: CrossIcon,
          onClick: function onClick() {
            return onCancel(close);
          }
        })));
      };

      var renderFooter = function renderFooter(close) {
        if (!footer && !hasFooter) {
          return undefined;
        }

        return React.createElement(Pane, {
          borderTop: "muted",
          clearfix: true
        }, React.createElement(Pane, {
          padding: 16,
          "float": "right"
        }, footer ? _this2.renderNode(footer, close) : React.createElement(React.Fragment, null, hasCancel && React.createElement(Button, {
          tabIndex: 0,
          onClick: function onClick() {
            return onCancel(close);
          }
        }, cancelLabel), React.createElement(Button, {
          tabIndex: 0,
          marginLeft: 8,
          appearance: "primary",
          isLoading: isConfirmLoading,
          disabled: isConfirmDisabled,
          onClick: function onClick() {
            return onConfirm(close);
          },
          intent: intent
        }, confirmLabel))));
      };

      return React.createElement(Overlay, {
        isShown: isShown,
        shouldCloseOnClick: shouldCloseOnOverlayClick,
        shouldCloseOnEscapePress: shouldCloseOnEscapePress,
        onExited: onCloseComplete,
        onEntered: onOpenComplete,
        containerProps: _objectSpread({
          display: 'flex',
          alignItems: 'flex-start',
          justifyContent: 'center'
        }, overlayProps),
        preventBodyScrolling: preventBodyScrolling
      }, function (_ref) {
        var state = _ref.state,
            close = _ref.close;
        return React.createElement(Pane, _extends({
          role: "dialog",
          backgroundColor: "white",
          elevation: 4,
          borderRadius: 8,
          width: width,
          maxWidth: maxWidth,
          maxHeight: maxHeight,
          marginX: sideOffsetWithUnit,
          marginY: topOffsetWithUnit,
          display: "flex",
          flexDirection: "column",
          css: animationStyles,
          "data-state": state
        }, containerProps), renderHeader(close), React.createElement(Pane, _extends({
          "data-state": state,
          display: "flex",
          overflow: "auto",
          padding: 16,
          flexDirection: "column",
          minHeight: minHeightContent
        }, contentContainerProps), React.createElement(Pane, null, _this2.renderChildren(close))), renderFooter(close));
      });
    }
  }]);

  return Dialog;
}(React.Component);

Dialog.displayName = "Dialog";

_defineProperty(Dialog, "propTypes", {
  /**
   * Children can be a string, node or a function accepting `({ close })`.
   * When passing a string, <Paragraph /> is used to wrap the string.
   */
  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,

  /**
   * The intent of the Dialog. Used for the button.
   */
  intent: PropTypes.oneOf(['none', 'success', 'warning', 'danger']).isRequired,

  /**
   * When true, the dialog is shown.
   */
  isShown: PropTypes.bool,

  /**
   * Title of the Dialog. Titles should use Title Case.
   */
  title: PropTypes.node,

  /**
   * When true, the header with the title and close icon button is shown.
   */
  hasHeader: PropTypes.bool,

  /**
   * You can override the default header with your own custom component.
   *
   * This is useful if you want to provide a custom header and footer, while
   * also enabling your Dialog's content to scroll.
   *
   * Header can either be a React node or a function accepting `({ close })`.
   */
  header: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),

  /**
   * When true, the footer with the cancel and confirm button is shown.
   */
  hasFooter: PropTypes.bool,

  /**
   * You can override the default footer with your own custom component.
   *
   * This is useful if you want to provide a custom header and footer, while
   * also enabling your Dialog's content to scroll.
   *
   * Footer can either be a React node or a function accepting `({ close })`.
   */
  footer: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),

  /**
   * When true, the cancel button is shown.
   */
  hasCancel: PropTypes.bool,

  /**
   * When true, the close button is shown
   */
  hasClose: PropTypes.bool,

  /**
   * Function that will be called when the exit transition is complete.
   */
  onCloseComplete: PropTypes.func,

  /**
   * Function that will be called when the enter transition is complete.
   */
  onOpenComplete: PropTypes.func,

  /**
   * Function that will be called when the confirm button is clicked.
   * This does not close the Dialog. A close function will be passed
   * as a paramater you can use to close the dialog.
   *
   * `onConfirm={(close) => close()}`
   */
  onConfirm: PropTypes.func,

  /**
   * Label of the confirm button.
   */
  confirmLabel: PropTypes.string,

  /**
   * When true, the confirm button is set to loading.
   */
  isConfirmLoading: PropTypes.bool,

  /**
   * When true, the confirm button is set to disabled.
   */
  isConfirmDisabled: PropTypes.bool,

  /**
   * Function that will be called when the cancel button is clicked.
   * This closes the Dialog by default.
   *
   * `onCancel={(close) => close()}`
   */
  onCancel: PropTypes.func,

  /**
   * Label of the cancel button.
   */
  cancelLabel: PropTypes.string,

  /**
   * Boolean indicating if clicking the overlay should close the overlay.
   */
  shouldCloseOnOverlayClick: PropTypes.bool,

  /**
   * Boolean indicating if pressing the esc key should close the overlay.
   */
  shouldCloseOnEscapePress: PropTypes.bool,

  /**
   * Width of the Dialog.
   */
  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),

  /**
   * The space above the dialog.
   * This offset is also used at the bottom when there is not enough vertical
   * space available on screen â€” and the dialog scrolls internally.
   */
  topOffset: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),

  /**
   * The space on the left/right sides of the dialog when there isn't enough
   * horizontal space available on screen.
   */
  sideOffset: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),

  /**
   * The min height of the body content.
   * Makes it less weird when only showing little content.
   */
  minHeightContent: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),

  /**
   * Props that are passed to the dialog container.
   */
  containerProps: PropTypes.object,

  /**
   * Props that are passed to the content container.
   */
  contentContainerProps: PropTypes.object,

  /**
   * Whether or not to prevent scrolling in the outer body
   */
  preventBodyScrolling: PropTypes.bool,

  /**
   * Props that are passed to the Overlay component.
   */
  overlayProps: PropTypes.object
});

_defineProperty(Dialog, "defaultProps", {
  isShown: false,
  hasHeader: true,
  hasClose: true,
  hasFooter: true,
  hasCancel: true,
  intent: 'none',
  width: 560,
  topOffset: '12vmin',
  sideOffset: '16px',
  minHeightContent: 80,
  confirmLabel: 'Confirm',
  isConfirmLoading: false,
  isConfirmDisabled: false,
  cancelLabel: 'Cancel',
  shouldCloseOnOverlayClick: true,
  shouldCloseOnEscapePress: true,
  onCancel: function onCancel(close) {
    return close();
  },
  onConfirm: function onConfirm(close) {
    return close();
  },
  preventBodyScrolling: false,
  overlayProps: {}
});

export default withTheme(Dialog);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kaWFsb2cvc3JjL0RpYWxvZy5qcyJdLCJuYW1lcyI6WyJjc3MiLCJSZWFjdCIsIlByb3BUeXBlcyIsIlBhbmUiLCJQYXJhZ3JhcGgiLCJIZWFkaW5nIiwiT3ZlcmxheSIsIkJ1dHRvbiIsIkljb25CdXR0b24iLCJ3aXRoVGhlbWUiLCJDcm9zc0ljb24iLCJhbmltYXRpb25FYXNpbmciLCJkZWNlbGVyYXRpb24iLCJhY2NlbGVyYXRpb24iLCJBTklNQVRJT05fRFVSQVRJT04iLCJvcGVuQW5pbWF0aW9uIiwia2V5ZnJhbWVzIiwiZnJvbSIsInRyYW5zZm9ybSIsIm9wYWNpdHkiLCJ0byIsImNsb3NlQW5pbWF0aW9uIiwiYW5pbWF0aW9uU3R5bGVzIiwiYW5pbWF0aW9uIiwiRGlhbG9nIiwibm9kZSIsImNsb3NlIiwiY2hpbGRyZW4iLCJwcm9wcyIsInRpdGxlIiwid2lkdGgiLCJpbnRlbnQiLCJpc1Nob3duIiwidG9wT2Zmc2V0Iiwic2lkZU9mZnNldCIsImhhc0hlYWRlciIsImhlYWRlciIsImhhc0Nsb3NlIiwiaGFzRm9vdGVyIiwiZm9vdGVyIiwiaGFzQ2FuY2VsIiwib25DbG9zZUNvbXBsZXRlIiwib25PcGVuQ29tcGxldGUiLCJvbkNhbmNlbCIsIm9uQ29uZmlybSIsImNvbmZpcm1MYWJlbCIsImlzQ29uZmlybUxvYWRpbmciLCJpc0NvbmZpcm1EaXNhYmxlZCIsImNhbmNlbExhYmVsIiwic2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljayIsInNob3VsZENsb3NlT25Fc2NhcGVQcmVzcyIsImNvbnRhaW5lclByb3BzIiwiY29udGVudENvbnRhaW5lclByb3BzIiwibWluSGVpZ2h0Q29udGVudCIsInByZXZlbnRCb2R5U2Nyb2xsaW5nIiwib3ZlcmxheVByb3BzIiwic2lkZU9mZnNldFdpdGhVbml0IiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwibWF4V2lkdGgiLCJ0b3BPZmZzZXRXaXRoVW5pdCIsIm1heEhlaWdodCIsInJlbmRlckhlYWRlciIsInVuZGVmaW5lZCIsInJlbmRlck5vZGUiLCJyZW5kZXJGb290ZXIiLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50Iiwic3RhdGUiLCJyZW5kZXJDaGlsZHJlbiIsIkNvbXBvbmVudCIsIm9uZU9mVHlwZSIsImZ1bmMiLCJpc1JlcXVpcmVkIiwib25lT2YiLCJib29sIiwic3RyaW5nIiwibnVtYmVyIiwib2JqZWN0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEsU0FBU0EsR0FBVCxRQUFvQixRQUFwQjtBQUNBLE9BQU9DLEtBQVAsTUFBa0IsT0FBbEI7QUFDQSxPQUFPQyxTQUFQLE1BQXNCLFlBQXRCO0FBQ0EsU0FBU0MsSUFBVCxRQUFxQixjQUFyQjtBQUNBLFNBQVNDLFNBQVQsRUFBb0JDLE9BQXBCLFFBQW1DLGtCQUFuQztBQUNBLFNBQVNDLE9BQVQsUUFBd0IsZUFBeEI7QUFDQSxTQUFTQyxNQUFULEVBQWlCQyxVQUFqQixRQUFtQyxlQUFuQztBQUNBLFNBQVNDLFNBQVQsUUFBMEIsYUFBMUI7QUFDQSxTQUFTQyxTQUFULFFBQTBCLGFBQTFCO0FBRUEsSUFBTUMsZUFBZSxHQUFHO0FBQ3RCQyxFQUFBQSxZQUFZLGtDQURVO0FBRXRCQyxFQUFBQSxZQUFZO0FBRlUsQ0FBeEI7QUFLQSxJQUFNQyxrQkFBa0IsR0FBRyxHQUEzQjtBQUVBLElBQU1DLGFBQWEsR0FBR2YsR0FBRyxDQUFDZ0IsU0FBSixDQUFjLGVBQWQsRUFBK0I7QUFDbkRDLEVBQUFBLElBQUksRUFBRTtBQUNKQyxJQUFBQSxTQUFTLEVBQUUsWUFEUDtBQUVKQyxJQUFBQSxPQUFPLEVBQUU7QUFGTCxHQUQ2QztBQUtuREMsRUFBQUEsRUFBRSxFQUFFO0FBQ0ZGLElBQUFBLFNBQVMsRUFBRSxVQURUO0FBRUZDLElBQUFBLE9BQU8sRUFBRTtBQUZQO0FBTCtDLENBQS9CLENBQXRCO0FBV0EsSUFBTUUsY0FBYyxHQUFHckIsR0FBRyxDQUFDZ0IsU0FBSixDQUFjLGdCQUFkLEVBQWdDO0FBQ3JE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b3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdnbGFtb3InXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnXG5pbXBvcnQgeyBQYW5lIH0gZnJvbSAnLi4vLi4vbGF5ZXJzJ1xuaW1wb3J0IHsgUGFyYWdyYXBoLCBIZWFkaW5nIH0gZnJvbSAnLi4vLi4vdHlwb2dyYXBoeSdcbmltcG9ydCB7IE92ZXJsYXkgfSBmcm9tICcuLi8uLi9vdmVybGF5J1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uQnV0dG9uIH0gZnJvbSAnLi4vLi4vYnV0dG9ucydcbmltcG9ydCB7IHdpdGhUaGVtZSB9IGZyb20gJy4uLy4uL3RoZW1lJ1xuaW1wb3J0IHsgQ3Jvc3NJY29uIH0gZnJvbSAnLi4vLi4vaWNvbnMnXG5cbmNvbnN0IGFuaW1hdGlvbkVhc2luZyA9IHtcbiAgZGVjZWxlcmF0aW9uOiBgY3ViaWMtYmV6aWVyKDAuMCwgMC4wLCAwLjIsIDEpYCxcbiAgYWNjZWxlcmF0aW9uOiBgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAxLCAxKWBcbn1cblxuY29uc3QgQU5JTUFUSU9OX0RVUkFUSU9OID0gMjAwXG5cbmNvbnN0IG9wZW5BbmltYXRpb24gPSBjc3Mua2V5ZnJhbWVzKCdvcGVuQW5pbWF0aW9uJywge1xuICBmcm9tOiB7XG4gICAgdHJhbnNmb3JtOiAnc2NhbGUoMC44KScsXG4gICAgb3BhY2l0eTogMFxuICB9LFxuICB0bzoge1xuICAgIHRyYW5zZm9ybTogJ3NjYWxlKDEpJyxcbiAgICBvcGFjaXR5OiAxXG4gIH1cbn0pXG5cbmNvbnN0IGNsb3NlQW5pbWF0aW9uID0gY3NzLmtleWZyYW1lcygnY2xvc2VBbmltYXRpb24nLCB7XG4gIGZyb206IHtcbiAgICB0cmFuc2Zvcm06ICdzY2FsZSgxKScsXG4gICAgb3BhY2l0eTogMVxuICB9LFxuICB0bzoge1xuICAgIHRyYW5zZm9ybTogJ3NjYWxlKDAuOCknLFxuICAgIG9wYWNpdHk6IDBcbiAgfVxufSlcblxuY29uc3QgYW5pbWF0aW9uU3R5bGVzID0ge1xuICAnJltkYXRhLXN0YXRlPVwiZW50ZXJpbmdcIl0sICZbZGF0YS1zdGF0ZT1cImVudGVyZWRcIl0nOiB7XG4gICAgYW5pbWF0aW9uOiBgJHtvcGVuQW5pbWF0aW9ufSAke0FOSU1BVElPTl9EVVJBVElPTn1tcyAke2FuaW1hdGlvbkVhc2luZy5kZWNlbGVyYXRpb259IGJvdGhgXG4gIH0sXG4gICcmW2RhdGEtc3RhdGU9XCJleGl0aW5nXCJdJzoge1xuICAgIGFuaW1hdGlvbjogYCR7Y2xvc2VBbmltYXRpb259ICR7QU5JTUFUSU9OX0RVUkFUSU9OfW1zICR7YW5pbWF0aW9uRWFzaW5nLmFjY2VsZXJhdGlvbn0gYm90aGBcbiAgfVxufVxuXG5jbGFzcyBEaWFsb2cgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIC8qKlxuICAgICAqIENoaWxkcmVuIGNhbiBiZSBhIHN0cmluZywgbm9kZSBvciBhIGZ1bmN0aW9uIGFjY2VwdGluZyBgKHsgY2xvc2UgfSlgLlxuICAgICAqIFdoZW4gcGFzc2luZyBhIHN0cmluZywgPFBhcmFncmFwaCAvPiBpcyB1c2VkIHRvIHdyYXAgdGhlIHN0cmluZy5cbiAgICAgKi9cbiAgICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm5vZGUsIFByb3BUeXBlcy5mdW5jXSkuaXNSZXF1aXJlZCxcblxuICAgIC8qKlxuICAgICAqIFRoZSBpbnRlbnQgb2YgdGhlIERpYWxvZy4gVXNlZCBmb3IgdGhlIGJ1dHRvbi5cbiAgICAgKi9cbiAgICBpbnRlbnQ6IFByb3BUeXBlcy5vbmVPZihbJ25vbmUnLCAnc3VjY2VzcycsICd3YXJuaW5nJywgJ2RhbmdlciddKVxuICAgICAgLmlzUmVxdWlyZWQsXG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIHRoZSBkaWFsb2cgaXMgc2hvd24uXG4gICAgICovXG4gICAgaXNTaG93bjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBUaXRsZSBvZiB0aGUgRGlhbG9nLiBUaXRsZXMgc2hvdWxkIHVzZSBUaXRsZSBDYXNlLlxuICAgICAqL1xuICAgIHRpdGxlOiBQcm9wVHlwZXMubm9kZSxcblxuICAgIC8qKlxuICAgICAqIFdoZW4gdHJ1ZSwgdGhlIGhlYWRlciB3aXRoIHRoZSB0aXRsZSBhbmQgY2xvc2UgaWNvbiBidXR0b24gaXMgc2hvd24uXG4gICAgICovXG4gICAgaGFzSGVhZGVyOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIFlvdSBjYW4gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgaGVhZGVyIHdpdGggeW91ciBvd24gY3VzdG9tIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdXNlZnVsIGlmIHlvdSB3YW50IHRvIHByb3ZpZGUgYSBjdXN0b20gaGVhZGVyIGFuZCBmb290ZXIsIHdoaWxlXG4gICAgICogYWxzbyBlbmFibGluZyB5b3VyIERpYWxvZydzIGNvbnRlbnQgdG8gc2Nyb2xsLlxuICAgICAqXG4gICAgICogSGVhZGVyIGNhbiBlaXRoZXIgYmUgYSBSZWFjdCBub2RlIG9yIGEgZnVuY3Rpb24gYWNjZXB0aW5nIGAoeyBjbG9zZSB9KWAuXG4gICAgICovXG4gICAgaGVhZGVyOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMubm9kZSwgUHJvcFR5cGVzLmZ1bmNdKSxcblxuICAgIC8qKlxuICAgICAqIFdoZW4gdHJ1ZSwgdGhlIGZvb3RlciB3aXRoIHRoZSBjYW5jZWwgYW5kIGNvbmZpcm0gYnV0dG9uIGlzIHNob3duLlxuICAgICAqL1xuICAgIGhhc0Zvb3RlcjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBZb3UgY2FuIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGZvb3RlciB3aXRoIHlvdXIgb3duIGN1c3RvbSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB0byBwcm92aWRlIGEgY3VzdG9tIGhlYWRlciBhbmQgZm9vdGVyLCB3aGlsZVxuICAgICAqIGFsc28gZW5hYmxpbmcgeW91ciBEaWFsb2cncyBjb250ZW50IHRvIHNjcm9sbC5cbiAgICAgKlxuICAgICAqIEZvb3RlciBjYW4gZWl0aGVyIGJlIGEgUmVhY3Qgbm9kZSBvciBhIGZ1bmN0aW9uIGFjY2VwdGluZyBgKHsgY2xvc2UgfSlgLlxuICAgICAqL1xuICAgIGZvb3RlcjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm5vZGUsIFByb3BUeXBlcy5mdW5jXSksXG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIHRoZSBjYW5jZWwgYnV0dG9uIGlzIHNob3duLlxuICAgICAqL1xuICAgIGhhc0NhbmNlbDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIHRoZSBjbG9zZSBidXR0b24gaXMgc2hvd25cbiAgICAgKi9cbiAgICBoYXNDbG9zZTogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGV4aXQgdHJhbnNpdGlvbiBpcyBjb21wbGV0ZS5cbiAgICAgKi9cbiAgICBvbkNsb3NlQ29tcGxldGU6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBlbnRlciB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlLlxuICAgICAqL1xuICAgIG9uT3BlbkNvbXBsZXRlOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgY29uZmlybSBidXR0b24gaXMgY2xpY2tlZC5cbiAgICAgKiBUaGlzIGRvZXMgbm90IGNsb3NlIHRoZSBEaWFsb2cuIEEgY2xvc2UgZnVuY3Rpb24gd2lsbCBiZSBwYXNzZWRcbiAgICAgKiBhcyBhIHBhcmFtYXRlciB5b3UgY2FuIHVzZSB0byBjbG9zZSB0aGUgZGlhbG9nLlxuICAgICAqXG4gICAgICogYG9uQ29uZmlybT17KGNsb3NlKSA9PiBjbG9zZSgpfWBcbiAgICAgKi9cbiAgICBvbkNvbmZpcm06IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgLyoqXG4gICAgICogTGFiZWwgb2YgdGhlIGNvbmZpcm0gYnV0dG9uLlxuICAgICAqL1xuICAgIGNvbmZpcm1MYWJlbDogUHJvcFR5cGVzLnN0cmluZyxcblxuICAgIC8qKlxuICAgICAqIFdoZW4gdHJ1ZSwgdGhlIGNvbmZpcm0gYnV0dG9uIGlzIHNldCB0byBsb2FkaW5nLlxuICAgICAqL1xuICAgIGlzQ29uZmlybUxvYWRpbmc6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgLyoqXG4gICAgICogV2hlbiB0cnVlLCB0aGUgY29uZmlybSBidXR0b24gaXMgc2V0IHRvIGRpc2FibGVkLlxuICAgICAqL1xuICAgIGlzQ29uZmlybURpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgY2FuY2VsIGJ1dHRvbiBpcyBjbGlja2VkLlxuICAgICAqIFRoaXMgY2xvc2VzIHRoZSBEaWFsb2cgYnkgZGVmYXVsdC5cbiAgICAgKlxuICAgICAqIGBvbkNhbmNlbD17KGNsb3NlKSA9PiBjbG9zZSgpfWBcbiAgICAgKi9cbiAgICBvbkNhbmNlbDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAvKipcbiAgICAgKiBMYWJlbCBvZiB0aGUgY2FuY2VsIGJ1dHRvbi5cbiAgICAgKi9cbiAgICBjYW5jZWxMYWJlbDogUHJvcFR5cGVzLnN0cmluZyxcblxuICAgIC8qKlxuICAgICAqIEJvb2xlYW4gaW5kaWNhdGluZyBpZiBjbGlja2luZyB0aGUgb3ZlcmxheSBzaG91bGQgY2xvc2UgdGhlIG92ZXJsYXkuXG4gICAgICovXG4gICAgc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljazogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBCb29sZWFuIGluZGljYXRpbmcgaWYgcHJlc3NpbmcgdGhlIGVzYyBrZXkgc2hvdWxkIGNsb3NlIHRoZSBvdmVybGF5LlxuICAgICAqL1xuICAgIHNob3VsZENsb3NlT25Fc2NhcGVQcmVzczogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBXaWR0aCBvZiB0aGUgRGlhbG9nLlxuICAgICAqL1xuICAgIHdpZHRoOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMubnVtYmVyXSksXG5cbiAgICAvKipcbiAgICAgKiBUaGUgc3BhY2UgYWJvdmUgdGhlIGRpYWxvZy5cbiAgICAgKiBUaGlzIG9mZnNldCBpcyBhbHNvIHVzZWQgYXQgdGhlIGJvdHRvbSB3aGVuIHRoZXJlIGlzIG5vdCBlbm91Z2ggdmVydGljYWxcbiAgICAgKiBzcGFjZSBhdmFpbGFibGUgb24gc2NyZWVuIOKAlCBhbmQgdGhlIGRpYWxvZyBzY3JvbGxzIGludGVybmFsbHkuXG4gICAgICovXG4gICAgdG9wT2Zmc2V0OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMubnVtYmVyXSksXG5cbiAgICAvKipcbiAgICAgKiBUaGUgc3BhY2Ugb24gdGhlIGxlZnQvcmlnaHQgc2lkZXMgb2YgdGhlIGRpYWxvZyB3aGVuIHRoZXJlIGlzbid0IGVub3VnaFxuICAgICAqIGhvcml6b250YWwgc3BhY2UgYXZhaWxhYmxlIG9uIHNjcmVlbi5cbiAgICAgKi9cbiAgICBzaWRlT2Zmc2V0OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMubnVtYmVyXSksXG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWluIGhlaWdodCBvZiB0aGUgYm9keSBjb250ZW50LlxuICAgICAqIE1ha2VzIGl0IGxlc3Mgd2VpcmQgd2hlbiBvbmx5IHNob3dpbmcgbGl0dGxlIGNvbnRlbnQuXG4gICAgICovXG4gICAgbWluSGVpZ2h0Q29udGVudDogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm51bWJlcl0pLFxuXG4gICAgLyoqXG4gICAgICogUHJvcHMgdGhhdCBhcmUgcGFzc2VkIHRvIHRoZSBkaWFsb2cgY29udGFpbmVyLlxuICAgICAqL1xuICAgIGNvbnRhaW5lclByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgLyoqXG4gICAgICogUHJvcHMgdGhhdCBhcmUgcGFzc2VkIHRvIHRoZSBjb250ZW50IGNvbnRhaW5lci5cbiAgICAgKi9cbiAgICBjb250ZW50Q29udGFpbmVyUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIG9yIG5vdCB0byBwcmV2ZW50IHNjcm9sbGluZyBpbiB0aGUgb3V0ZXIgYm9keVxuICAgICAqL1xuICAgIHByZXZlbnRCb2R5U2Nyb2xsaW5nOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIFByb3BzIHRoYXQgYXJlIHBhc3NlZCB0byB0aGUgT3ZlcmxheSBjb21wb25lbnQuXG4gICAgICovXG4gICAgb3ZlcmxheVByb3BzOiBQcm9wVHlwZXMub2JqZWN0XG4gIH1cblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGlzU2hvd246IGZhbHNlLFxuICAgIGhhc0hlYWRlcjogdHJ1ZSxcbiAgICBoYXNDbG9zZTogdHJ1ZSxcbiAgICBoYXNGb290ZXI6IHRydWUsXG4gICAgaGFzQ2FuY2VsOiB0cnVlLFxuICAgIGludGVudDogJ25vbmUnLFxuICAgIHdpZHRoOiA1NjAsXG4gICAgdG9wT2Zmc2V0OiAnMTJ2bWluJyxcbiAgICBzaWRlT2Zmc2V0OiAnMTZweCcsXG4gICAgbWluSGVpZ2h0Q29udGVudDogODAsXG4gICAgY29uZmlybUxhYmVsOiAnQ29uZmlybScsXG4gICAgaXNDb25maXJtTG9hZGluZzogZmFsc2UsXG4gICAgaXNDb25maXJtRGlzYWJsZWQ6IGZhbHNlLFxuICAgIGNhbmNlbExhYmVsOiAnQ2FuY2VsJyxcbiAgICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrOiB0cnVlLFxuICAgIHNob3VsZENsb3NlT25Fc2NhcGVQcmVzczogdHJ1ZSxcbiAgICBvbkNhbmNlbDogY2xvc2UgPT4gY2xvc2UoKSxcbiAgICBvbkNvbmZpcm06IGNsb3NlID0+IGNsb3NlKCksXG4gICAgcHJldmVudEJvZHlTY3JvbGxpbmc6IGZhbHNlLFxuICAgIG92ZXJsYXlQcm9wczoge31cbiAgfVxuXG4gIHJlbmRlck5vZGUgPSAobm9kZSwgY2xvc2UpID0+IHtcbiAgICBpZiAodHlwZW9mIG5vZGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBub2RlKHsgY2xvc2UgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZVxuICB9XG5cbiAgcmVuZGVyQ2hpbGRyZW4gPSBjbG9zZSA9PiB7XG4gICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gdGhpcy5wcm9wc1xuXG4gICAgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGNoaWxkcmVuKHsgY2xvc2UgfSlcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGNoaWxkcmVuID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIDxQYXJhZ3JhcGg+e2NoaWxkcmVufTwvUGFyYWdyYXBoPlxuICAgIH1cblxuICAgIHJldHVybiBjaGlsZHJlblxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHRpdGxlLFxuICAgICAgd2lkdGgsXG4gICAgICBpbnRlbnQsXG4gICAgICBpc1Nob3duLFxuICAgICAgdG9wT2Zmc2V0LFxuICAgICAgc2lkZU9mZnNldCxcbiAgICAgIGhhc0hlYWRlcixcbiAgICAgIGhlYWRlcixcbiAgICAgIGhhc0Nsb3NlLFxuICAgICAgaGFzRm9vdGVyLFxuICAgICAgZm9vdGVyLFxuICAgICAgaGFzQ2FuY2VsLFxuICAgICAgb25DbG9zZUNvbXBsZXRlLFxuICAgICAgb25PcGVuQ29tcGxldGUsXG4gICAgICBvbkNhbmNlbCxcbiAgICAgIG9uQ29uZmlybSxcbiAgICAgIGNvbmZpcm1MYWJlbCxcbiAgICAgIGlzQ29uZmlybUxvYWRpbmcsXG4gICAgICBpc0NvbmZpcm1EaXNhYmxlZCxcbiAgICAgIGNhbmNlbExhYmVsLFxuICAgICAgc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljayxcbiAgICAgIHNob3VsZENsb3NlT25Fc2NhcGVQcmVzcyxcbiAgICAgIGNvbnRhaW5lclByb3BzID0ge30sXG4gICAgICBjb250ZW50Q29udGFpbmVyUHJvcHMsXG4gICAgICBtaW5IZWlnaHRDb250ZW50LFxuICAgICAgcHJldmVudEJvZHlTY3JvbGxpbmcsXG4gICAgICBvdmVybGF5UHJvcHNcbiAgICB9ID0gdGhpcy5wcm9wc1xuXG4gICAgY29uc3Qgc2lkZU9mZnNldFdpdGhVbml0ID0gTnVtYmVyLmlzSW50ZWdlcihzaWRlT2Zmc2V0KVxuICAgICAgPyBgJHtzaWRlT2Zmc2V0fXB4YFxuICAgICAgOiBzaWRlT2Zmc2V0XG4gICAgY29uc3QgbWF4V2lkdGggPSBgY2FsYygxMDAlIC0gJHtzaWRlT2Zmc2V0V2l0aFVuaXR9ICogMilgXG5cbiAgICBjb25zdCB0b3BPZmZzZXRXaXRoVW5pdCA9IE51bWJlci5pc0ludGVnZXIodG9wT2Zmc2V0KVxuICAgICAgPyBgJHt0b3BPZmZzZXR9cHhgXG4gICAgICA6IHRvcE9mZnNldFxuICAgIGNvbnN0IG1heEhlaWdodCA9IGBjYWxjKDEwMCUgLSAke3RvcE9mZnNldFdpdGhVbml0fSAqIDIpYFxuXG4gICAgY29uc3QgcmVuZGVySGVhZGVyID0gY2xvc2UgPT4ge1xuICAgICAgaWYgKCFoZWFkZXIgJiYgIWhhc0hlYWRlcikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxQYW5lXG4gICAgICAgICAgcGFkZGluZz17MTZ9XG4gICAgICAgICAgZmxleFNocmluaz17MH1cbiAgICAgICAgICBib3JkZXJCb3R0b209XCJtdXRlZFwiXG4gICAgICAgICAgZGlzcGxheT1cImZsZXhcIlxuICAgICAgICAgIGFsaWduSXRlbXM9XCJjZW50ZXJcIlxuICAgICAgICA+XG4gICAgICAgICAge2hlYWRlciA/IChcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTm9kZShoZWFkZXIsIGNsb3NlKVxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8SGVhZGluZyBpcz1cImg0XCIgc2l6ZT17NjAwfSBmbGV4PVwiMVwiPlxuICAgICAgICAgICAgICAgIHt0aXRsZX1cbiAgICAgICAgICAgICAgPC9IZWFkaW5nPlxuICAgICAgICAgICAgICB7aGFzQ2xvc2UgJiYgKFxuICAgICAgICAgICAgICAgIDxJY29uQnV0dG9uXG4gICAgICAgICAgICAgICAgICBhcHBlYXJhbmNlPVwibWluaW1hbFwiXG4gICAgICAgICAgICAgICAgICBpY29uPXtDcm9zc0ljb259XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvbkNhbmNlbChjbG9zZSl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvUGFuZT5cbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCByZW5kZXJGb290ZXIgPSBjbG9zZSA9PiB7XG4gICAgICBpZiAoIWZvb3RlciAmJiAhaGFzRm9vdGVyKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFBhbmUgYm9yZGVyVG9wPVwibXV0ZWRcIiBjbGVhcmZpeD5cbiAgICAgICAgICA8UGFuZSBwYWRkaW5nPXsxNn0gZmxvYXQ9XCJyaWdodFwiPlxuICAgICAgICAgICAge2Zvb3RlciA/IChcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJOb2RlKGZvb3RlciwgY2xvc2UpXG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHsvKiBDYW5jZWwgc2hvdWxkIGJlIGZpcnN0IHRvIG1ha2Ugc3VyZSBmb2N1cyBnZXRzIG9uIGl0IGZpcnN0LiAqL31cbiAgICAgICAgICAgICAgICB7aGFzQ2FuY2VsICYmIChcbiAgICAgICAgICAgICAgICAgIDxCdXR0b24gdGFiSW5kZXg9ezB9IG9uQ2xpY2s9eygpID0+IG9uQ2FuY2VsKGNsb3NlKX0+XG4gICAgICAgICAgICAgICAgICAgIHtjYW5jZWxMYWJlbH1cbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0YWJJbmRleD17MH1cbiAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ9ezh9XG4gICAgICAgICAgICAgICAgICBhcHBlYXJhbmNlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICBpc0xvYWRpbmc9e2lzQ29uZmlybUxvYWRpbmd9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNDb25maXJtRGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvbkNvbmZpcm0oY2xvc2UpfVxuICAgICAgICAgICAgICAgICAgaW50ZW50PXtpbnRlbnR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2NvbmZpcm1MYWJlbH1cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvUGFuZT5cbiAgICAgICAgPC9QYW5lPlxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8T3ZlcmxheVxuICAgICAgICBpc1Nob3duPXtpc1Nob3dufVxuICAgICAgICBzaG91bGRDbG9zZU9uQ2xpY2s9e3Nob3VsZENsb3NlT25PdmVybGF5Q2xpY2t9XG4gICAgICAgIHNob3VsZENsb3NlT25Fc2NhcGVQcmVzcz17c2hvdWxkQ2xvc2VPbkVzY2FwZVByZXNzfVxuICAgICAgICBvbkV4aXRlZD17b25DbG9zZUNvbXBsZXRlfVxuICAgICAgICBvbkVudGVyZWQ9e29uT3BlbkNvbXBsZXRlfVxuICAgICAgICBjb250YWluZXJQcm9wcz17e1xuICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG4gICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICAgIC4uLm92ZXJsYXlQcm9wc1xuICAgICAgICB9fVxuICAgICAgICBwcmV2ZW50Qm9keVNjcm9sbGluZz17cHJldmVudEJvZHlTY3JvbGxpbmd9XG4gICAgICA+XG4gICAgICAgIHsoeyBzdGF0ZSwgY2xvc2UgfSkgPT4gKFxuICAgICAgICAgIDxQYW5lXG4gICAgICAgICAgICByb2xlPVwiZGlhbG9nXCJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJcbiAgICAgICAgICAgIGVsZXZhdGlvbj17NH1cbiAgICAgICAgICAgIGJvcmRlclJhZGl1cz17OH1cbiAgICAgICAgICAgIHdpZHRoPXt3aWR0aH1cbiAgICAgICAgICAgIG1heFdpZHRoPXttYXhXaWR0aH1cbiAgICAgICAgICAgIG1heEhlaWdodD17bWF4SGVpZ2h0fVxuICAgICAgICAgICAgbWFyZ2luWD17c2lkZU9mZnNldFdpdGhVbml0fVxuICAgICAgICAgICAgbWFyZ2luWT17dG9wT2Zmc2V0V2l0aFVuaXR9XG4gICAgICAgICAgICBkaXNwbGF5PVwiZmxleFwiXG4gICAgICAgICAgICBmbGV4RGlyZWN0aW9uPVwiY29sdW1uXCJcbiAgICAgICAgICAgIGNzcz17YW5pbWF0aW9uU3R5bGVzfVxuICAgICAgICAgICAgZGF0YS1zdGF0ZT17c3RhdGV9XG4gICAgICAgICAgICB7Li4uY29udGFpbmVyUHJvcHN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3JlbmRlckhlYWRlcihjbG9zZSl9XG5cbiAgICAgICAgICAgIDxQYW5lXG4gICAgICAgICAgICAgIGRhdGEtc3RhdGU9e3N0YXRlfVxuICAgICAgICAgICAgICBkaXNwbGF5PVwiZmxleFwiXG4gICAgICAgICAgICAgIG92ZXJmbG93PVwiYXV0b1wiXG4gICAgICAgICAgICAgIHBhZGRpbmc9ezE2fVxuICAgICAgICAgICAgICBmbGV4RGlyZWN0aW9uPVwiY29sdW1uXCJcbiAgICAgICAgICAgICAgbWluSGVpZ2h0PXttaW5IZWlnaHRDb250ZW50fVxuICAgICAgICAgICAgICB7Li4uY29udGVudENvbnRhaW5lclByb3BzfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8UGFuZT57dGhpcy5yZW5kZXJDaGlsZHJlbihjbG9zZSl9PC9QYW5lPlxuICAgICAgICAgICAgPC9QYW5lPlxuXG4gICAgICAgICAgICB7cmVuZGVyRm9vdGVyKGNsb3NlKX1cbiAgICAgICAgICA8L1BhbmU+XG4gICAgICAgICl9XG4gICAgICA8L092ZXJsYXk+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUaGVtZShEaWFsb2cpXG4iXX0=